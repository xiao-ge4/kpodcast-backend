# 🎙️ AI 播客生成器 (AI Podcast Generator)

> ⚠️ **私人仓库说明**：此仓库包含真实的 API 密钥配置文件 (config.ini)，请确保仓库设置为私有。

一个基于大语言模型的智能播客生成系统，支持多种输入方式，自动生成专业的播客内容和音频。

## ✨ 主要功能

### 1. 多种输入模式
- **🔍 Query 模式**：输入关键词或问题，系统自动搜索相关资料并生成播客
- **🔗 URL 模式**：输入网页链接，自动提取内容生成播客
- **📄 文档模式**：直接输入文本内容生成播客
- **📑 PDF 模式**：上传 PDF 文件，自动提取内容生成播客

### 2. 智能内容生成
- **自动搜索**：使用博查 API 搜索相关资料
- **智能提取**：支持多种网页内容提取方法（trafilatura、BeautifulSoup、newspaper3k、readability）
- **Playwright 渲染**：支持 JavaScript 渲染的动态网页
- **内容分析**：自动分析内容长度和深度，智能调整播客时长

### 3. 播客生成特性
- **多种风格**：新闻、故事、知识、历史、娱乐等多种播客风格
- **智能对话**：生成自然的主持人对话脚本
- **多语言支持**：支持中文和英文播客生成
- **特殊指令**：通过指令控制生成内容的风格和要求

### 4. 语音合成
- **腾讯云 TTS**：使用腾讯云语音合成服务
- **多种音色**：支持 12 种不同的音色选择
- **背景音乐**：自动添加片头音乐，支持多种风格

### 5. 高级功能
- **指令分析器**：使用 LLM 智能分析用户指令
- **Cookie 支持**：支持需要登录的网站内容提取
- **批量处理**：支持多个 PDF 文件同时处理
- **实时预览**：Gradio 界面实时显示生成进度

## 🚀 快速开始

### 1. 环境要求
- Python 3.8+
- Conda（推荐）或 pip

### 2. 安装步骤

```bash
# 克隆项目
git clone https://github.com/yourusername/podcast-generator.git
cd podcast-generator

# 创建虚拟环境（推荐使用 conda）
conda create -n podcast python=3.9
conda activate podcast

# 安装依赖
pip install -r requirements.txt

# 安装 Playwright 浏览器（用于网页渲染）
playwright install chromium
```

### 3. 配置文件

配置文件 `config.ini` 已包含在仓库中（私人仓库），无需额外配置。

如需修改配置，直接编辑 `config.ini` 文件即可。

### 4. 运行应用

```bash
python app.py
```

访问 http://localhost:7860 即可使用 Web 界面。

## 📖 使用指南

### Query 模式（搜索模式）
1. 选择"Query"输入类型
2. 输入关键词或问题，如"人工智能的最新进展"
3. 系统会自动搜索相关资料并生成播客

### URL 模式
1. 选择"URL"输入类型
2. 输入网页链接
3. 系统会自动提取网页内容并生成播客

### 文档模式
1. 选择"文档"输入类型
2. 粘贴或输入文本内容
3. 直接基于提供的内容生成播客

### PDF 模式
1. 选择"PDF文件"输入类型
2. 上传一个或多个 PDF 文件
3. 系统会提取 PDF 内容并生成播客

### 特殊指令
在"特殊指令"输入框中可以添加额外要求：
- "使用英文" - 生成英文播客
- "重点关注技术细节" - 调整内容焦点
- "生成10分钟的内容" - 控制播客长度

## 🛠️ 技术架构

### 核心组件
- **app.py** - 主应用入口，Gradio 界面
- **clients/** - API 客户端（混元、博查、TTS 等）
- **utils/** - 工具函数（配置加载、URL 提取、PDF 处理等）
- **pipeline/** - 播客生成流程
- **assets/bgm/** - 背景音乐资源

### 主要技术栈
- **Gradio** - Web 界面
- **腾讯云 SDK** - 语音合成和大模型服务
- **Playwright** - 动态网页渲染
- **PyPDF2/pdfplumber** - PDF 处理
- **trafilatura** - 网页内容提取

## 📊 API 使用说明

### 腾讯云服务
- **混元大模型**：用于生成播客脚本
- **语音合成 TTS**：将文本转换为语音

### 博查搜索 API
- 用于搜索相关资料
- 支持中文内容搜索

## 🔧 高级配置

### 调整生成参数
编辑 `config.ini` 中的参数：
```ini
[hunyuan_api]
temperature = 0.8  # 创造性（0-1）
top_p = 0.8        # 核采样参数
max_tokens = 10000 # 最大输出长度
```

### 自定义音色
在界面中选择不同的音色组合：
- 智瑜 & 智萌 - 年轻活泼
- 智兰 & 千嶂 - 成熟稳重
- WeJames & WeWinny - 英文播客

### 网页提取优化
对于需要登录的网站，可以配置 Cookie：
```ini
[web_extract]
cookie = your_cookie_string
headers_json = {"User-Agent": "..."}
```

## 📝 注意事项

1. **API 配额**：注意腾讯云 API 的使用配额
2. **Token 消耗**：PDF 模式会消耗较多 tokens，建议控制文件大小
3. **网络要求**：需要稳定的网络连接
4. **隐私安全**：不要在配置文件中提交敏感信息到 Git

## 🤝 贡献指南

欢迎提交 Issue 和 Pull Request！

## 📄 许可证

MIT License

## 🙏 致谢

- 腾讯云提供的混元大模型和 TTS 服务
- 博查搜索 API
- 所有开源项目贡献者

## 📧 联系方式

如有问题或建议，请提交 Issue 或联系项目维护者。

---

**注意**：使用前请确保已正确配置所有必要的 API 密钥。
